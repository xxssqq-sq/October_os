# 第0章 一些名词解释

## 操作系统

##  软件访问硬件的方式

1、内存映射

让CPU访问外设的内存就如同访问主板上的物理内存。

将外设内存映射到物理主机的内存上。

2、IO接口

通过IO接口访问接口上的寄存器。

## 应用程序与操作系统

1、应用程序和操作系统都是软件。

2、操作系统是为了方便管理计算机而想象出来的一套管理方法。

3、操作系统为应用程序的运行提供支持

4、用户态（特权3级）和内核态是CPU（特权0级）的两种状态

## 陷入内核

用户进程陷入内核态是指：由于内部或外部中断发生，当前进程被暂时终止执行，其上下被内核的 中断程序保存起来后，开始执行一段内核的代码。是内核的代码，不是用户程序在内核的代码。

应用程序处于特权级 3，操作系统内核处于特权级 0。当用户程序欲 访问系统资源时（无论是硬件，还是内核数据结构），它需要进行系统调用。这样 CPU 便进入了内核态，也称管态。

## 内存访问与程序分段

以绝对物理地址访问内存的CPU上运行程序，两个编译出来地址相同的用户程序没法同时运行，只能运行一个。

内存访问分段，让CPU采用“段基址+段内偏移地址”的方式来访问任意内存。

要想访问某个物理地址，只要凑出合适的段基地址和段内偏移地址，其和为该物理地址就行了。

只要程序分了段，把整个段平移到任何位置后，段内的地址相对于段基 址是不变的，无论段基址是多少，只要给出段内偏移地址，CPU 就能访问到正确的指令。

程序分段最重要的目的就是重定位，程序分段又是为了将大内存分成可以访问的小段， 通过这样变通的方法便能够访问到所有内存了。

## 代码段与数据段

Intel 处理器的程序计数器 cs：eip 能够自动获得下一条指令的原理，即将当前 eip 中的地址加上当前指令机器码的大小便是内存中下一条指 令的起始地址。即使指令间有空隙或其他非指令的数据，这也仅仅是在物理上将其断开了，依然可以用 jmp指令将非指令部分跳过以保持指令在逻辑上连续。

为了让程序内指令接连不断地执行，要把指令全部排在一起，形成一片连续的指令区域，这就是代码 段。这样 CPU 肯定能接连不断地执行下去。

指令是由操作码和操作数组成的，这对于数据也一样，程序运行不仅要有操作码，也得有操作数，操作数就是指程序中的数据。把数据连续地并排在一起存储形成的